
		################################################
		#
		#		THE GREENTECH CHALLENGE: File Global.R
		#
		###############################################



#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#

#-----------------------------------------------------------------------------
# --- LOAD LIBRARIES
#-----------------------------------------------------------------------------

# Chargement des libraries nécessaires:
library(sp)
library(shiny)
library(plotly)
library(ggplot2)
library(DT)
library(RColorBrewer)
library(streamgraph)
library(leaflet)
library(ggmap)
library(tidyr)
library(shinydashboard)
library(treemap)
library(d3treeR)
library(shinyjs)
		



# --- NOTE: Installation des packages:
# 1/ La majorité des packages sont sur le CRAN est s'installent avec:
# install.packages("nom_du_package")

# 2/ Certains packages nécessitent une installation particulière:

# 2.1/ Pour d3trrR:
#library(devtools)
#install_github("timelyportfolio/d3treeR")


# 2.2/ Pour streamgraph
# devtools::install_github("hrbrmstr/streamgraph")

# ---

#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#









#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#

#-----------------------------------------------------------------------------
# --- LOAD USEFUL FUNCTIONS
#-----------------------------------------------------------------------------

#fonction pour la geoloc
jsCode <- '
shinyjs.geoloc = function() {
	navigator.geolocation.getCurrentPosition(onSuccess, onError);
	function onError (err) {
		Shiny.onInputChange("geolocation", false);
	}
	function onSuccess (position) {
		setTimeout(function () {
			var coords = position.coords;
			console.log(coords.latitude + ", " + coords.longitude);
			Shiny.onInputChange("geolocation", true);
			Shiny.onInputChange("lat", coords.latitude);
			Shiny.onInputChange("long", coords.longitude);
		}, 5)
	}
};
'

#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#








#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#

#-----------------------------------------------------------------------------
# --- LOAD THE CSV FILE OF THE DATABASE
#-----------------------------------------------------------------------------

# Toutes les données sont dispo dans un environnement R grace au script 0_prepare_data
load("DATA/env_greentech.R")

#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------#








# -------------------------------------------------------------------------------------------------------------------------------------------------
# ---- CREATE A COLOR PALETTE

my_colors=brewer.pal( 12 , "Set3")[-2]

# -------------------------------------------------------------------------------------------------------------------------------------------------



		


